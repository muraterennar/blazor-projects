<style>

    .category-div {
        color: #000;
        font-size: 20px;
        cursor: pointer;
        /* margin-left: 5px; */
    }

        .category-div span a {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

    .category {
        padding: 2px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 20px;
        cursor: pointer;
        border-top: 1px solid #ccc;
    }

        .category:hover {
            background-color: #F8F4E3;
        }

    .category-all {
        /* margin-left: 20px; */
        text-decoration: none;
        color: black !important;
    }

    .category-link {
        text-decoration: none;
        color: #000 !important;
        font-size: 14px !important;
    }

    .category-sub {
        padding: 2px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 16px;
        cursor: pointer;
        border-top: 1px solid #ccc;
        /* margin-left: 20px; */
    }

        .category-sub:hover {
            background-color: #F8F4E3;
        }

    .all-category {
        /* margin-left: 20px; */
        font-size: 16px;
        text-decoration: none;
        color: black;
    }
</style>

@if(Categories != null)
{
    <div class="mt-3">
        <!-- Ana kategorileri listeler -->
        @foreach(var category in Categories.Where(c => c.kategoriustid == null))
        {
            <div>
                <span class="category" @onclick="() => ToggleCategory(category)">
                    <!-- Kategoriye tıklandığında ToggleCategory metodu çağrılır -->
                    <a class="category-link fw-bold" href="@category.NavigationUrl">
                        @category.kategoriadi  <!-- Kategori adı gösterilir -->
                    </a>

                    <!-- Kategori açıksa ve alt kategorileri varsa listeler -->
                    @if(category.kategorialtid == 1)
                    {
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 20 20">
                            <path d="M4.646 5.646a.5.5 0 0 1 .708 0L8 8.293l2.646-2.647a.5.5 0 1 1 .708.708l-3 3a.5.5 0 0 1-.708 0l-3-3a.5.5 0 0 1 0-.708z" />
                        </svg>
                    }
                </span>

                <!-- Kategori açıksa ve alt kategorileri varsa listeler -->
                @if(IsCategoryOpen(category) && HasChildren(int.Parse(category.id)))
                {
                    <!-- Alt kategorilere "Tümünü Seç" seçeneğini ekler -->
                    @if(category.kategorialtid == 1)
                    {
                        <div class="category-all">
                            <a class="fw-bold category-link" @onclick="()=> SelectAll(category)">Tümünü Seç</a>
                        </div>
                    }
                    <!-- Alt kategorileri listeler -->
                    <div>
                        @RenderChildren(int.Parse(category.id))
                    </div>
                }
            </div>
        }
    </div>
}